# ─────────────────────────────────────────────────────────────────────────────
# NOTIFLY BACKEND — Environment Variables
# Copy this file to .env and fill in your values.
# NEVER commit .env to git.
# ─────────────────────────────────────────────────────────────────────────────

# ─── Supabase PostgreSQL ───────────────────────────────────────────────────────
# Use the SESSION mode pooler URL for JPA/Hibernate (supports prepared statements)
# Format: postgresql://[user]:[password]@[host]:[port]/[dbname]?sslmode=require
#
# Find this in: Supabase Dashboard → Project → Settings → Database → Connection string → JDBC
SUPABASE_DB_URL=jdbc:postgresql://db.xxxxxxxxxxxx.supabase.co:5432/postgres?sslmode=require
SUPABASE_DB_USER=postgres
SUPABASE_DB_PASSWORD=your-supabase-database-password

# ─── Redis ───────────────────────────────────────────────────────────────────
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# ─── Kafka ───────────────────────────────────────────────────────────────────
KAFKA_BOOTSTRAP_SERVERS=kafka:9092

# ─── JWT Security ────────────────────────────────────────────────────────────
# MUST be at least 32 characters. Generate with: openssl rand -base64 48
JWT_SECRET=change-me-to-a-secure-random-string-at-least-32-chars-long!!
JWT_EXPIRY_MS=86400000
JWT_REFRESH_EXPIRY_MS=604800000

# ─── Email Provider (SendGrid) ────────────────────────────────────────────────
SENDGRID_API_KEY=SG.your-sendgrid-api-key
SENDGRID_FROM_EMAIL=noreply@yourdomain.com
SENDGRID_FROM_NAME=Notifly

# ─── SMS Provider (Twilio) ────────────────────────────────────────────────────
TWILIO_ACCOUNT_SID=AC
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_FROM_PHONE=+1234567890

# ─── Push Notifications (Firebase FCM) ───────────────────────────────────────
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_SERVER_KEY=your-firebase-server-key
# Path to Firebase service account JSON (mount as volume in Docker)
FIREBASE_SERVICE_ACCOUNT_PATH=/secrets/firebase-service-account.json

# ─── Rate Limiting ────────────────────────────────────────────────────────────
RATE_LIMIT_RPM=60
RATE_LIMIT_BURST=100

# ─── Outbox Poller ───────────────────────────────────────────────────────────
OUTBOX_POLL_MS=1000
OUTBOX_BATCH_SIZE=100

# ─── HikariCP Connection Pool ─────────────────────────────────────────────────
# Keep this low for Supabase free tier (max 15 connections total)
HIKARI_MAX_POOL_SIZE=5

# ─── Liquibase ───────────────────────────────────────────────────────────────
LIQUIBASE_ENABLED=true

# ─── Monitoring ──────────────────────────────────────────────────────────────
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=notifly-grafana-password

# ─── Logging ─────────────────────────────────────────────────────────────────
LOG_LEVEL=INFO
